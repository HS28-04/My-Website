<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hakan Seker – Website</title>

    <style>
        html { scroll-behavior: smooth; }
        
        :root {
            --bg-color: white;
            --text-color: black;
            --card-bg: #f0f0f0;
            --border-color: #ccc;
            --header-bg: white;
            --section-bg: #f5f5f5;
            --tab-bg: #333;
            --tab-text: white;
        }

        body.dark-mode {
            --bg-color: #121212;
            --text-color: #ffffff;
            --card-bg: #1e1e1e;
            --border-color: #333;
            --header-bg: #1a1a1a;
            --section-bg: #0d0d0d;
            --tab-bg: #ffffff;
            --tab-text: #000000;
        }

        * { cursor: none !important; }

        body, html { 
            margin: 0; padding: 0; 
            font-family: Arial, sans-serif; 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            overflow-x: hidden; 
            user-select: none;
            -webkit-user-select: none;
            transition: background-color 0.3s ease;
        }

        /* --- THE SHAKE --- */
        .earthquake { animation: shake-screen 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake-screen {
            10%, 90% { transform: translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-8px, 0, 0); }
            40%, 60% { transform: translate3d(8px, 0, 0); }
        }

        /* --- CLICKABLE TAB --- */
        #pull-tab {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 35px;
            height: 120px;
            background-color: var(--tab-bg);
            border-radius: 8px 0 0 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
            transition: opacity 0.1s, background-color 0.3s ease;
        }

        #pull-tab.shattered { opacity: 0; pointer-events: none; }

        #pull-tab span {
            color: var(--tab-text); font-size: 10px; font-weight: 900;
            letter-spacing: 1px; white-space: nowrap;
            writing-mode: vertical-rl; transform: rotate(180deg);
            pointer-events: none;
            transition: color 0.3s ease;
        }

        /* Particles Overlay */
        #particles-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1001;
        }

        /* --- LOADING SCREEN --- */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: white; z-index: 99999; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease-in-out;
        }
        #loading-screen h1 { color: black; font-weight: 300; font-size: 3em; letter-spacing: 5px; margin: 0 0 20px 0; opacity: 0; transition: opacity 0.6s ease-in-out; }
        #loader-canvas-container { width: 100%; height: 300px; opacity: 0; transition: opacity 0.6s ease-in-out; }
        .fade-in { opacity: 1 !important; }

        header {
            position: fixed; width: 100%; top: 0; height: 80px; line-height: 80px;
            background-color: var(--header-bg); padding: 0 3%; border-bottom: 1px solid var(--border-color);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); z-index: 900; box-sizing: border-box;
        }
        nav a { color: var(--text-color); text-decoration: none; margin-right: 20px; font-weight: 300; font-size: 1.2em; position: relative; z-index: 901; }

        #lavori { padding: 160px 3% 80px 3%; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 1200px; }
        
        .work-wrapper {
            position: relative; width: 100%; aspect-ratio: 1 / 1; background-color: var(--card-bg);
            border-radius: 8px; overflow: hidden; display: block; 
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            touch-action: none; -webkit-user-drag: none; z-index: 1;
            --drag-x: 0px;
            --drag-y: 0px;
        }

        .work-wrapper:hover { transform: scale(1.02); }
        
        .work-wrapper.dragging { 
            transition: none !important; 
            z-index: 999; 
            transform: translate(var(--drag-x), var(--drag-y)) scale(1.02);
        }

        .work-wrapper.vibrating { 
            animation: struggle 0.1s infinite linear; 
        }

        @keyframes struggle {
            0% { transform: translate(calc(var(--drag-x) + 0px), calc(var(--drag-y) + 0px)) rotate(0deg) scale(1.02); }
            25% { transform: translate(calc(var(--drag-x) + 2px), calc(var(--drag-y) - 2px)) rotate(0.5deg) scale(1.02); }
            50% { transform: translate(calc(var(--drag-x) - 2px), calc(var(--drag-y) + 2px)) rotate(-0.5deg) scale(1.02); }
            75% { transform: translate(calc(var(--drag-x) + 2px), calc(var(--drag-y) + 2px)) rotate(0.3deg) scale(1.02); }
            100% { transform: translate(calc(var(--drag-x) + 0px), calc(var(--drag-y) + 0px)) rotate(0deg) scale(1.02); }
        }

        #chi-sono { background-color: var(--section-bg); padding: 100px 3%; }
        #chi-sono p { max-width: 600px; line-height: 1.6; margin: 0; }
        #contatti { border-top: 1px solid var(--border-color); padding: 60px 3%; position: relative; z-index: 5; }
        #contatti p { margin: 0 0 10px 0; }
        #contatti a, footer a { color: var(--text-color); text-decoration: none; position: relative; z-index: 6; }
        footer { padding: 20px 3%; border-top: 1px solid var(--border-color); }

        /* --- CURSOR --- */
        .cursor {
            position: fixed; width: 26px; height: 26px;
            background-color: rgba(255, 255, 255, 0.8); border-radius: 50%;
            pointer-events: none; transform: translate(-50%, -50%);
            transition: width 0.15s, height 0.15s;
            z-index: 100000; mix-blend-mode: difference;
        }
        .cursor.hovered { width: 130px; height: 130px; }
        .cursor-text-container { position: fixed; width: 130px; height: 130px; top: 0; left: 0; pointer-events: none; display: none; z-index: 100001; transform: translate(-50%, -50%); }
        .bounce { animation: cursor-bounce 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes cursor-bounce {
            0% { transform: translate(-50%, -50%) scale(1); }
            30% { transform: translate(-50%, -50%) scale(1.4); }
            50% { transform: translate(-50%, -50%) scale(0.95); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
        .cursor-text-container span { position: absolute; font-size: 11px; font-weight: 900; letter-spacing: 0.05em; white-space: pre; transform-origin: center bottom; color: white; text-shadow: 0px 1px 2px rgba(0,0,0,0.2); opacity: 0; transition: opacity 0.5s ease; }
        @media (max-width: 768px) { #lavori { grid-template-columns: 1fr; } }
    </style>
</head>

<body>

    <div id="particles-overlay"></div>
    
    <div id="pull-tab">
        <span id="tab-label">DARK MODE</span>
    </div>

    <div id="loading-screen">
        <h1 id="welcome-text">WELCOME</h1>
        <div id="loader-canvas-container"></div>
    </div>

    <header>
        <nav>
            <a href="#lavori" class="nav-link">Projects</a>
            <a href="#contatti" class="nav-link">Contact</a>
        </nav>
    </header>

    <section id="lavori">
        <a href="lavoro_1.html" class="work-wrapper" draggable="false">
            <div id="sphere-preview" style="width:100%; height:100%;"></div>
        </a>
        <a href="lavoro_2.html" class="work-wrapper" draggable="false">
            <div id="font-preview" style="width:100%; height:100%;"></div>
        </a>
    </section>

    <section id="chi-sono">
        <p>"This is just a website created during a seminar, don't take it seriously.
            <br>Also I have no idea what I'm doing anymore I'm losing my mind."
        </p>
    </section>

    <section id="contatti">
        <p>Email: <a href="mailto:hseker2000@gmail.com">hseker2000@gmail.com</a></p>
        <p>LinkedIn: <a href="#">linkedin.com/in/hakanseker</a></p>
    </section>

    <footer>
        <p>© 2026 Hakan Seker - All rights reserved | <a href="privacy.html">Privacy</a></p>
    </footer>

    <div class="cursor" id="cursor"></div>
    <div class="cursor-text-container" id="cursor-text"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>

    <script>
        // --- CURSOR LOGIC ---
        const cursor = document.getElementById('cursor');
        const cursorTextContainer = document.getElementById('cursor-text');

        document.addEventListener('mousemove', e => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            cursorTextContainer.style.left = e.clientX + 'px';
            cursorTextContainer.style.top = e.clientY + 'px';
        });

        document.querySelectorAll('a, #pull-tab').forEach(link => {
            link.addEventListener('mouseenter', () => {
                if (!isDragging) cursor.classList.add('hovered');
            });
            link.addEventListener('mouseleave', () => {
                if (!isDragging && !link.classList.contains('work-wrapper')) {
                    cursor.classList.remove('hovered');
                }
            });
        });

        document.addEventListener('mousedown', () => {
            cursor.classList.remove('bounce');
            cursorTextContainer.classList.remove('bounce');
            void cursor.offsetWidth; 
            cursor.classList.add('bounce');
            cursorTextContainer.classList.add('bounce');
        });

        // --- SHATTER SYSTEM (P5.js) ---
        let shatterInstance = new p5((s) => {
            let particles = [];
            let isExploding = false;
            let tabW = 35, tabH = 120;

            s.setup = () => {
                let canvas = s.createCanvas(window.innerWidth, window.innerHeight);
                canvas.parent('particles-overlay');
                s.noStroke();
            };

            s.draw = () => {
                s.clear();
                if (particles.length > 0) {
                    particles.forEach((p, index) => {
                        p.update();
                        p.display();
                        if (p.reconstructed) {
                            particles.splice(index, 1);
                        }
                    });
                    
                    if (particles.length === 0 && isExploding) {
                        isExploding = false;
                        document.getElementById('pull-tab').classList.remove('shattered');
                    }
                }
            };

            s.shatter = (x, y) => {
                isExploding = true;
                particles = [];
                let pColor = document.body.classList.contains('dark-mode') ? 18 : 255;
                
                for (let i = 0; i < 50; i++) {
                    particles.push(new Particle(s, x - tabW/2, y, tabW, tabH, pColor));
                }
                setTimeout(() => {
                    particles.forEach(p => p.startReturn());
                }, 1500);
            };

            class Particle {
                constructor(s, x, y, w, h, col) {
                    this.s = s;
                    this.originX = x + s.random(w);
                    this.originY = y - h/2 + s.random(h);
                    this.pos = s.createVector(this.originX, this.originY);
                    this.vel = p5.Vector.random2D().mult(s.random(5, 15));
                    this.acc = s.createVector(0, 0);
                    this.size = s.random(4, 8);
                    this.returning = false;
                    this.reconstructed = false;
                    this.color = col;
                }
                update() {
                    if (this.returning) {
                        let target = this.s.createVector(this.originX, this.originY);
                        let dir = p5.Vector.sub(target, this.pos);
                        let dist = dir.mag();
                        dir.normalize();
                        dir.mult(15);
                        this.pos.add(dir);
                        if (dist < 10) this.reconstructed = true;
                    } else {
                        this.vel.add(this.acc);
                        this.pos.add(this.vel);
                        this.vel.mult(0.95);
                    }
                }
                display() {
                    this.s.fill(this.color);
                    this.s.rect(this.pos.x, this.pos.y, this.size, this.size);
                }
                startReturn() { this.returning = true; }
            }
        });

        // --- TAB CLICK LOGIC ---
        const pullTab = document.getElementById('pull-tab');
        const tabLabel = document.getElementById('tab-label');

        pullTab.addEventListener('click', (e) => {
            const rect = pullTab.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            pullTab.classList.add('shattered');
            shatterInstance.shatter(centerX, centerY);
            
            const isDark = document.body.classList.toggle('dark-mode');
            tabLabel.innerText = isDark ? "WHITE MODE" : "DARK MODE";
            
            document.body.classList.remove('earthquake');
            void document.body.offsetWidth; 
            document.body.classList.add('earthquake');
            setTimeout(() => document.body.classList.remove('earthquake'), 500);
        });

        // --- PULL & DRAG INTERACTION ---
        let isDragging = false;
        let startX, startY;
        let currentElement = null;
        let textChangeTimer = null;
        let dragThresholdMet = false;

        document.querySelectorAll('.work-wrapper').forEach(el => {
            el.addEventListener('dragstart', (e) => e.preventDefault());
            
            el.addEventListener('mousedown', (e) => {
                if (e.button !== 0) return;
                isDragging = true; 
                currentElement = el;
                dragThresholdMet = false;
                
                startX = e.clientX; 
                startY = e.clientY;
                
                el.classList.add('dragging');
                
                clearTimeout(textChangeTimer);
                textChangeTimer = setTimeout(() => {
                    if(isDragging && currentElement) {
                        currentElement.classList.add('vibrating');
                        createCircularText(cursorTextContainer, "LET ME GO", 50, true);
                    }
                }, 1000);
                e.preventDefault();
            });

            el.addEventListener('click', (e) => {
                if (dragThresholdMet) {
                    e.preventDefault();
                    e.stopPropagation();
                }
            });

            el.addEventListener('mouseenter', () => {
                if(!isDragging) {
                    cursor.classList.add('hovered'); 
                    cursorTextContainer.style.display = 'block';
                    // Reduced totalAngle to 100 for tighter kerning on CLICK ME
                    createCircularText(cursorTextContainer, "CLICK ME", 50, false, 100);
                }
            });

            el.addEventListener('mouseleave', () => {
                if (!isDragging) { 
                    cursor.classList.remove('hovered'); 
                    cursorTextContainer.style.display = 'none'; 
                    resetPull(); 
                }
            });
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging || !currentElement) return;
            
            const dx = e.clientX - startX;
            const dy = e.clientY - startY;
            
            if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {
                dragThresholdMet = true;
            }

            currentElement.style.setProperty('--drag-x', `${dx}px`);
            currentElement.style.setProperty('--drag-y', `${dy}px`);
            
            if (!currentElement.classList.contains('vibrating')) {
                currentElement.style.transform = `translate(${dx}px, ${dy}px) scale(1.02)`;
            }
        });

        document.addEventListener('mouseup', () => {
            if (isDragging) {
                clearTimeout(textChangeTimer);
                cursorTextContainer.querySelectorAll('span').forEach(s => s.style.opacity = '0');
                const isHovering = currentElement && currentElement.matches(':hover');
                resetPull();
                if (!isHovering) {
                    cursor.classList.remove('hovered');
                    cursorTextContainer.style.display = 'none';
                }
            }
        });

        function resetPull() {
            if (currentElement) {
                currentElement.classList.remove('dragging');
                currentElement.classList.remove('vibrating');
                currentElement.style.transform = ''; 
                currentElement.style.setProperty('--drag-x', `0px`);
                currentElement.style.setProperty('--drag-y', `0px`);
            }
            isDragging = false; 
            currentElement = null;
        }

        /**
         * Enhanced createCircularText with custom angle parameter
         */
        function createCircularText(container, text, radius, shouldFade, customAngle) {
            container.innerHTML = "";
            const letters = text.toUpperCase().split("");
            // Default to 140 if no customAngle is provided
            const totalAngle = customAngle || 140; 
            const angleStep = totalAngle / (letters.length - 1);
            
            letters.forEach((letter, i) => {
                const angle = -(totalAngle/2) + i * angleStep;
                const rad = angle * (Math.PI / 180);
                const x = radius * Math.sin(rad);
                const y = -radius * Math.cos(rad) - 12; 
                
                const span = document.createElement("span");
                span.innerText = letter;
                span.style.left = `calc(50% + ${x}px)`;
                span.style.top = `calc(50% + ${y}px)`;
                span.style.transform = `translate(-50%,0) rotate(${angle}deg)`;
                
                if (shouldFade) {
                    span.style.opacity = "0";
                    span.style.transition = "opacity 0.5s ease";
                    container.appendChild(span);
                    setTimeout(() => {
                        span.style.opacity = "1";
                    }, i * 50); 
                } else {
                    span.style.opacity = "1";
                    container.appendChild(span);
                }
            });
        }

        // --- LOADING SCREEN ---
        (function () {
            const loader = document.getElementById('loading-screen');
            const welcome = document.getElementById('welcome-text');
            const canvasCont = document.getElementById('loader-canvas-container');
            if (sessionStorage.getItem('visited')) {
                loader.style.display = 'none';
            } else {
                setTimeout(() => welcome.classList.add('fade-in'), 100);
                setTimeout(() => canvasCont.classList.add('fade-in'), 300);
                new p5((s) => {
                    let face, posX, rotZ = 0, rotY = 0, startTime, speed;
                    s.preload = () => { face = s.loadImage('images/face.png'); }
                    s.setup = () => {
                        let canvas = s.createCanvas(window.innerWidth, 300, s.WEBGL);
                        canvas.parent('loader-canvas-container');
                        posX = -s.width * 0.3; startTime = s.millis();
                        speed = (s.width * 0.6) / 132;
                    }
                    s.draw = () => {
                        s.background(255); s.ambientLight(150); s.directionalLight(255, 255, 255, 0.5, 1, -0.5);
                        s.push(); s.translate(posX, 0, 0); s.rotateZ(rotZ); s.rotateY(rotY);
                        if (face) { s.texture(face); s.sphere(80, 64, 64); } s.pop();
                        posX += speed; rotZ += 0.03; rotY += 0.05;
                        if (s.millis() - startTime > 2200) {
                            loader.style.opacity = '0';
                            setTimeout(() => { loader.style.display = 'none'; sessionStorage.setItem('visited', 'true'); }, 800);
                            s.noLoop();
                        }
                    }
                });
            }
        })();

        // --- SPHERE PREVIEW ---
        new p5((s) => {
            let face; let rotY = 0;
            s.preload = () => { face = s.loadImage('images/face.png'); }
            s.setup = () => {
                const cont = document.getElementById('sphere-preview');
                s.createCanvas(cont.offsetWidth, cont.offsetHeight, s.WEBGL).parent('sphere-preview');
            }
            s.draw = () => {
                if(document.body.classList.contains('dark-mode')) s.background(30); else s.background(240);
                s.noStroke(); s.rotateY(rotY); rotY += 0.01;
                s.ambientLight(150); s.directionalLight(255, 255, 255, 0.5, 1, -0.5);
                if (face) { s.texture(face); s.sphere(s.width * 0.35, 64, 64); }
            }
        });

        // --- FONT PREVIEW ---
        new p5((s) => {
            let font;
            s.preload = () => { font = s.loadFont('https://cdnjs.cloudflare.com/ajax/libs/topcoat/0.8.0/font/SourceCodePro-Regular.otf'); }
            s.setup = () => {
                const cont = document.getElementById('font-preview');
                s.createCanvas(cont.offsetWidth, cont.offsetHeight, s.WEBGL).parent('font-preview');
            }
            s.draw = () => {
                if(document.body.classList.contains('dark-mode')) s.background(40); else s.background(245);
                s.ambientLight(180); s.directionalLight(255, 255, 255, 0.5, 1, -0.5);
                s.rotateX(-0.2); s.rotateY(0.2); s.noStroke();
                s.push(); if(document.body.classList.contains('dark-mode')) s.fill(60); else s.fill(220);
                s.box(s.width * 0.7, s.width * 0.7, s.width * 0.1); s.pop();
                if (font) {
                    s.textFont(font); s.textAlign(s.CENTER, s.CENTER);
                    s.push(); s.translate(0, 0, s.width * 0.06); 
                    if(document.body.classList.contains('dark-mode')) s.fill(255); else s.fill(30);
                    s.textSize(s.width * 0.3); s.text("H", -s.width * 0.15, 0); s.text("S", s.width * 0.15, 0); s.pop();
                }
            }
        });
    </script>
</body>
</html>